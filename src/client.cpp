// conn state
// data
// process packets
    // read data
    // compress data
    // encrypt data?
    // write data